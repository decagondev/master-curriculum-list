<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DS10 Sprint Challenge</title>
    <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body>
    <header>
        <nav>
            <div class="logo">Data Science Unit 3</div>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li class="dropdown">
                    <a href="#">Modules</a>
                    <div class="dropdown-content">
                        <a href="../modules/module1/index.html">Module 1: Introduction to SQL</a>
                        <a href="../modules/module2/index.html">Module 2: SQL for Analysis</a>
                        <a href="../modules/module3/index.html">Module 3: NoSQL and Document-Oriented Databases</a>
                        <a href="../modules/module4/index.html">Module 4: ACID and Database Scalability Trade-offs</a>
                    </div>
                </li>
                <li><a href="../code-alongs/index.html">Code-Alongs</a></li>
                <li><a href="../sprint-challenge/index.html" class="active">Sprint Challenge</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <h1>Sprint Challenge: Databases and SQL</h1>

        <section class="content-box">
            <h2>Sprint Challenge Overview</h2>
            <p>This sprint challenge will assess your understanding of the concepts covered throughout this sprint on
                Databases and SQL. You'll demonstrate your ability to create and populate SQLite databases, write
                complex SQL queries for data analysis, work with multi-table relationships using JOINs, and understand
                the differences between SQL and NoSQL database systems.</p>
        </section>

        <section class="content-box">
            <h2>Challenge Instructions</h2>

            <h3 id="databases-and-sql">Databases and SQL</h3>
            <p>In this sprint challenge you will write code to interact with SQLite databases. You may use any tools and
                references you wish, but your final code should reflect <em>your</em> work and be saved in
                <code>.py</code> files (<em>not</em> notebooks), and be uploaded below.</p>
            <p>For all your code, you may only import/use the following:</p>
            <ul>
                <li>other modules (python files) that you write</li>
                <li><code>sqlite3</code> (from the standard library)</li>
            </ul>

            <h3 id="part-1---making-and-populating-a-database">Part 1 - Making and populating a Database</h3>
            <p>Consider the following table of data (column headers are in bold):</p>
            <table class="data-table">
                <tbody>
                    <tr>
                        <td class="data-table-cell"><span class="table-header">s</span></td>
                        <td class="data-table-cell"><span class="table-header">x</span></td>
                        <td class="data-table-cell"><span class="table-header">y</span></td>
                    </tr>
                    <tr>
                        <td class="data-table-cell">'g'</td>
                        <td class="data-table-cell">3</td>
                        <td class="data-table-cell">9</td>
                    </tr>
                    <tr>
                        <td class="data-table-cell">'v'</td>
                        <td class="data-table-cell">5</td>
                        <td class="data-table-cell">7</td>
                    </tr>
                    <tr>
                        <td class="data-table-cell">'f'</td>
                        <td class="data-table-cell">8</td>
                        <td class="data-table-cell">7</td>
                    </tr>
                </tbody>
            </table>

            <p>Using the standard <code>sqlite3</code> module:</p>
            <ul>
                <li>Open a connection to a new (blank) database file called <code>demo_data.sqlite3</code></li>
                <li>Make a cursor, and execute an appropriate <code>CREATE TABLE</code> statement to accept the above
                    data (name the table <code>demo</code>)</li>
                <li>Write and execute appropriate <code>INSERT INTO</code> statements to add the data (as shown above)
                    to the database</li>
            </ul>

            <p>Make sure to <code>commit()</code> so your data is saved! The file size should be non-zero.</p>

            <p>Then write the following queries (also with <code>sqlite3</code>) to test the demo database and save
                <strong>the results of these queries</strong> under the following variables names:</p>
            <ul>
                <li><code>row_count</code>: How many rows are in the table?</li>
                <li><code>xy_at_least_5</code>: How many rows are there where both <code>x</code> and <code>y</code> are
                    at least 5?</li>
                <li><code>unique_y</code>: How many unique values of <code>y</code> are there (hint -
                    <code>COUNT()</code> can accept a keyword <code>DISTINCT</code>)?</li>
            </ul>

            <p>If you print out the values to these variables you may see them displayed in a format something like:
                <code>[(&lt;some_number&gt;, )]</code>. You can leave your answers in this format, no need to index into
                the list or tuple to access the integer value directly. We will be testing your code by executing
                queries against your <code>demo_data.sqlite3</code> database so CodeGrade will be expecting the answers
                to be in this "list of tuples" format.</p>

            <p>Also, CodeGrade will be attempting to import your <code>demo_data.py</code> file as a module to read the
                values of <code>row_count</code>, <code>xy_at_least_5</code>, and <code>unique_y</code>. Due to this,
                please do not declare these variables inside of an <code>if __name__ == '__main__':</code> statement.
                You can print them out inside of that if statement to ensure that you're getting the correct answers,
                but please declare these three variables and assign them their values in the main body of the
                <code>demo_data.py</code> file.</p>

            <p>Your code (to reproduce all above steps) should be saved in <code>demo_data.py</code> and turned in
                <strong>along with</strong> the generated SQLite database (<code>demo_data.sqlite3</code>).</p>

            <p>If you wish, you can write your queries in a <code>queries.py</code> file, but this is not required. If
                you choose to do this, please submit the <code>queries.py</code> file along with the other two required
                files.</p>

            <h3 id="part-2---the-northwind-database">Part 2 - The Northwind Database - Basic Queries</h3>
            <p>Using <code>sqlite3</code>, connect to the given <code>northwind_small.sqlite3</code> database.</p>

            <div class="image-container">
                <img src="../assets/images/northwind_erd.png" alt="Northwind ERD"
                    style="max-width: 100%; height: auto;">
            </div>

            <p>Above is an entity-relationship diagram - a picture summarizing the schema and relationships in the
                database. Note that it was generated using Microsoft Access, and some of the specific table/field names
                are different in the provided data. You can see all the tables available to SQLite as follows:</p>

            <pre><code>&gt;&gt;&gt; curs.execute("SELECT name FROM sqlite_master WHERE type='table' ORDER BY name;").fetchall()
[('Category',), ('Customer',), ('CustomerCustomerDemo',),
('CustomerDemographic',), ('Employee',), ('EmployeeTerritory',), ('Order',),
('OrderDetail',), ('Product',), ('Region',), ('Shipper',), ('Supplier',),
('Territory',)]</code></pre>

            <p><em>Warning</em>: unlike the diagram, the tables in SQLite are singular and not plural (do not end in
                <code>s</code>). And you can see the schema (<code>CREATE TABLE</code> statement) behind any given table
                with:</p>

            <pre><code>&gt;&gt;&gt; curs.execute('SELECT sql FROM sqlite_master WHERE name="Customer";').fetchall()
[('CREATE TABLE "Customer" \n(\n  "Id" VARCHAR(8000) PRIMARY KEY, \n
"CompanyName" VARCHAR(8000) NULL, \n  "ContactName" VARCHAR(8000) NULL, \n
"ContactTitle" VARCHAR(8000) NULL, \n  "Address" VARCHAR(8000) NULL, \n  "City"
VARCHAR(8000) NULL, \n  "Region" VARCHAR(8000) NULL, \n  "PostalCode"
VARCHAR(8000) NULL, \n  "Country" VARCHAR(8000) NULL, \n  "Phone" VARCHAR(8000)
NULL, \n  "Fax" VARCHAR(8000) NULL \n)',)]</code></pre>

            <p>In particular note that the <em>primary</em> key is <code>Id</code>, and not <code>CustomerId</code> or
                <code>SupplierId</code>. On other tables (where it is a <em>foreign</em> key) it will be
                <code>CustomerId</code>. Also note - the <code>Order</code> table conflicts with the <code>ORDER</code>
                keyword! We'll just avoid that particular table, but it's a good lesson in the danger of keyword
                conflicts.</p>

            <p>Answer the following questions (each is from a single table) and <strong>then save each query</strong>
                under the following variable name:</p>
            <ul>
                <li><code>expensive_items</code>: What are the ten most expensive items (per unit price) in the
                    database? Please return all columns in the table, not just the price and name but all columns.</li>
                <li><code>avg_hire_age</code>: What is the average age of an employee at the time of their hiring?
                    (Hint: a lot of arithmetic works with dates.)</li>
            </ul>

            <p>Your code (to load and query the data) should be saved in <code>northwind.py</code>. <strong>PLEASE NOTE
                    that in parts 2 and 3 you will be saving the query itself to the indicated variable names, not the
                    results of the query. You can still execute the query to check your work, but please save the query
                    string itself to the variable names above.</strong> You're also encouraged to include the
                <em>output</em> from your queries as docstring comments, to facilitate grading and feedback, but this
                will not be checked by the autograder. Again, please make sure that these queries are declared in the
                main body of the <code>northwind.py</code> file and not in an <code>if __name__ == "__main__":</code>
                if-statement.</p>

            <h3 id="part-3---sailing-the-northwind-seas">Part 3 - Sailing the Northwind Seas (JOIN statements)</h3>
            <p>You've answered some basic questions from the Northwind database, looking at individual tables - now it's
                time to put things together with <code>JOIN</code>!</p>

            <p>Using <code>sqlite3</code> in <code>northwind.py</code>, answer the following:</p>
            <ul>
                <li><code>ten_most_expensive</code>: What are the ten most expensive items (per unit price) in the
                    database <em>and</em> their suppliers? Please return only the ProductName, UnitPrice, and
                    CompanyName columns.</li>
                <li><code>largest_category</code>: What is the largest category (by number of unique products in it)?
                </li>
            </ul>

            <p>Your code (to load and query the data) should be saved in <code>northwind.py</code>. <strong>PLEASE NOTE
                    that in parts 2 and 3 you will be saving the query itself to the indicated variable names, not the
                    results of the query. You can still execute the query to check your work, but please save the query
                    string itself to the variable names above.</strong> You're also encouraged to include the
                <em>output</em> from your queries as docstring comments to facilitate grading and feedback, but this
                will not be checked by the autograder. Again, please make sure that these queries are declared in the
                main body of the <code>northwind.py</code> file and not in an <code>if __name__ == "__main__":</code>
                if-statement.</p>

            <h3 id="part-4---turn-it-in">Part 4 - Turn it in!</h3>
            <p>Submit the following files:</p>
            <ul>
                <li><code>demo_data.py</code></li>
                <li><code>northwind.py</code></li>
                <li><code>demo_data.sqlite3</code></li>
                <li><code>northwind_small.sqlite3</code></li>
            </ul>

            <p><strong>You're also encouraged to include the output from your queries as docstring comments, to
                    facilitate grading and feedback</strong>. Thanks for your hard work!</p>
        </section>

        <section class="content-box">
            <h2>Challenge Expectations</h2>
            <p>The Sprint Challenge is designed to test your mastery of the following key concepts:</p>
            <ul>
                <li><strong>Database Creation and Management</strong>: Creating SQLite databases, tables, and populating
                    them with data</li>
                <li><strong>SQL Query Writing</strong>: Writing effective SELECT statements with filtering, aggregation,
                    and sorting</li>
                <li><strong>Multi-table Operations</strong>: Using JOIN statements to combine data from multiple related
                    tables</li>
                <li><strong>Data Analysis with SQL</strong>: Performing analytical queries to extract meaningful
                    insights from databases</li>
                <li><strong>Database Schema Understanding</strong>: Reading and interpreting entity-relationship
                    diagrams and table structures</li>
            </ul>

            <h3>What to Expect</h3>
            <p>In this sprint challenge, you'll apply everything you've learned about databases and SQL to work with
                real-world data scenarios. This challenge will test your ability to:</p>
            <ul>
                <li>Create and populate SQLite databases from scratch using Python</li>
                <li>Write complex SQL queries to extract specific information from databases</li>
                <li>Use aggregate functions like COUNT, AVG, and DISTINCT for data analysis</li>
                <li>Perform JOIN operations to combine data from multiple tables</li>
                <li>Work with the Northwind database, a classic example used in database education</li>
                <li>Handle database connections, cursors, and transactions properly</li>
                <li>Save query results in the appropriate format for automated testing</li>
                <li>Structure your code professionally with proper variable declarations</li>
            </ul>

            <p>Remember to demonstrate your understanding of the concepts from all four modules in this sprint: SQL
                fundamentals, advanced analysis techniques, NoSQL concepts, and database scalability considerations!</p>
        </section>

        <section id="resources">
            <h2>Additional Resources</h2>
            <div class="content-box">
                <h3>SQL Fundamentals</h3>
                <ul>
                    <li><a href="https://www.sqlitetutorial.net/" target="_blank" rel="noopener">SQLite Tutorial</a>
                    </li>
                    <li><a href="https://www.w3schools.com/sql/sql_join.asp" target="_blank" rel="noopener">SQL JOIN
                            Tutorial</a></li>
                </ul>

                <h3>SQLite Documentation</h3>
                <ul>
                    <li><a href="https://www.sqlite.org/datatype3.html" target="_blank" rel="noopener">SQLite Data
                            Types</a></li>
                    <li><a href="https://www.sqlite.org/lang_datefunc.html" target="_blank" rel="noopener">SQLite Date
                            and Time Functions</a></li>
                </ul>
            </div>
        </section>
    </main>
</body>

</html>