<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 3 - Unit Testing</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #1a1d23; /* Dark background color */
            color: #ffffff;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #222831; /* Darker container background */
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        h1, h2, h3, h4 {
            color: #ffffff;
            margin: 0;
        }
        h1 {
            color: #ffffff;
            margin-bottom: 30px;
            border-bottom: 2px solid #ff5722; /* Orange accent color */
            padding-bottom: 10px;
        }
        h2 {
            color: #ffffff;
            margin-top: 30px;
            margin-bottom: 20px;
        }
        h3 {
            color: #ff5722; /* Orange accent color */
            margin-top: 0;
        }
        h4 {
            color: #ffffff;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        .section {
            margin-bottom: 40px;
            background-color: #2a303c;
            border-radius: 4px;
            padding: 20px;
            border: 1px solid #333a47;
        }
        .section p, .section li {
            color: #b3b3b3;
        }
        ul, ol {
            color: #b3b3b3;
            padding-left: 20px;
        }
        li {
            margin-bottom: 10px;
        }
        .button {
            display: inline-block;
            padding: 8px 16px;
            background-color: #ff5722; /* Orange accent color */
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .button:hover {
            background-color: #ff7043; /* Lighter orange on hover */
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.5);
        }
        
        /* Navigation styling */
        nav {
            margin-bottom: 30px;
        }
        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 0;
            margin-top: 20px;
        }
        nav a {
            display: inline-block;
            padding: 8px 16px;
            background-color: #333a47;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        nav a:hover {
            background-color: #ff5722;
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.5);
        }
        
        /* Module grid styling */
        .module-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .module-card {
            background-color: #333a47;
            border-radius: 6px;
            padding: 20px;
            border: 1px solid #444c5c;
            transition: transform 0.3s, box-shadow 0.3s;
          display: flex;
  flex-direction: column;
}
        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .module-card h3 {
            margin-top: 0;
            color: #ff5722;
        }
        .module-card p {
            color: #b3b3b3;
          flex-grow: 1;
}
        
        /* Video grid styling */
        .video-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-top: 20px;
        }
        .video-card {
            background-color: #333a47;
            border-radius: 6px;
            padding: 20px;
            border: 1px solid #444c5c;
            width: 100%;
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin-bottom: 15px;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 4px;
        }
        
        /* Resources styling */
        .resource-card a {
            color: #ff5722;
            text-decoration: none;
        }
        .resource-card a:hover {
            text-decoration: underline;
        }
        
        .resource-link-list li, .resource-link-list a {
            text-decoration: none;
            color: #ffffff;
        }

        .resource-link-list a:hover {
            text-decoration: underline;
            color: #ff5722;
        }
        
        /* Media queries */
        @media (max-width: 768px) {
            .video-grid, .module-grid {
                grid-template-columns: 1fr;
            }
            nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
        
        /* Code pre formatting */
        pre {
            background-color: #1a1d23;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 14px;
            border: 1px solid #444c5c;
        }
        
        code {
            font-family: 'Courier New', Courier, monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Module 3 - Unit Testing</h1>

        <div class="section">
            <h2>Unit Testing</h2>
            <p>Unit testing is a fundamental practice in software development that helps ensure code quality, catch bugs early, and make refactoring safer. In this module, you'll learn how to write effective unit tests using Jest, a popular JavaScript testing framework.</p>

            <h2>Learning Objectives</h2>
            <div class="module-grid">
                <div class="module-card">
                    <h3>Testing Fundamentals</h3>
                    <p>Understand the principles of unit testing, test-driven development (TDD), and the testing pyramid.</p>
                </div>
                <div class="module-card">
                    <h3>Jest Framework</h3>
                    <p>Master Jest's features including test organization, assertions, mocks, and test coverage reporting.</p>
                </div>
                <div class="module-card">
                    <h3>Testing Patterns</h3>
                    <p>Learn common testing patterns and best practices for writing maintainable and effective tests.</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Module Content</h2>
            <div class="module-grid">
                <div class="module-card">
                    <h3>Testing Basics</h3>
                    <ul>
                        <li>What is Unit Testing?</li>
                        <li>Test-Driven Development</li>
                        <li>Testing Pyramid</li>
                    </ul>
                </div>
                <div class="module-card">
                    <h3>Jest Framework</h3>
                    <ul>
                        <li>Test Organization</li>
                        <li>Assertions & Matchers</li>
                        <li>Mocks & Spies</li>
                    </ul>
                </div>
                <div class="module-card">
                    <h3>Testing Patterns</h3>
                    <ul>
                        <li>Test Structure</li>
                        <li>Edge Cases</li>
                        <li>Code Coverage</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Testing Fundamentals</h2>
            
            <div class="video-grid">
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/6yy8xxrfyk" title="Why Test Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Why Do We Test?</h3>
                    <p>Testing is an essential skill for a web developer to have. It's hard to anticipate every way that a user might interact with your site, not to mention it is incredibly time-consuming to test all of those options manually.</p>
                    
                    <p>If we don't have tests, it's safe to assume the following:</p>
                    <ul>
                        <li>Application code has to be tested manually</li>
                        <li>There is no way to know if a change broke another piece of code</li>
                        <li>You cannot be sure if the code is correct</li>
                        <li>Manually testing takes a lot of unnecessary time</li>
                        <li>Adding new features becomes slow</li>
                    </ul>
                    
                    <h4>Advantages of Testing</h4>
                    <ul>
                        <li>Verifies edge cases</li>
                        <li>Developer can concentrate on current changes (safety net)</li>
                    </ul>
                    
                    <h4>Drawbacks of Testing</h4>
                    <ul>
                        <li>More code to write and maintain</li>
                        <li>More tooling</li>
                        <li>Additional dependencies</li>
                        <li>May provide a false sense of security</li>
                        <li>Trivial test failures may break the build</li>
                        <li>Regressions (when a new feature breaks existing code)</li>
                    </ul>
                </div>
                
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/f8seisa4rh" title="Jest Introduction" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Unit Testing with Jest</h3>
                    <p>There are many testing tools available for JavaScript applications. Examples include Jest, Mocha/Chai, Jasmine, Qunit, Enzyme, Supertest, Istanbul, Karma, and Cypress.</p>
                    
                    <p>For this module, we'll focus on <strong>Jest</strong>, a JavaScript testing framework that works particularly well with React applications.</p>
                    
                    <h4>What is Jest?</h4>
                    <p>Jest is a test runner and command-line interface npm package. It was originally made by Facebook and is included out-of-the-box with create-react-app. Jest can run asynchronous tests, snapshot testing, and produce coverage reports.</p>
                    
                    <h4>Watch Mode</h4>
                    <p>Instead of running tests manually, Jest has a built-in watch mode feature that will run tests automatically as files change. Jest detects these changes automatically and only runs the tests related to the changes.</p>
                </div>
                
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/5k23ogyxk5" title="TDD Fundamentals" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Test-Driven Development</h3>
                    <p>Test-Driven Development is a software development approach where tests are written before the code that needs to be tested. The TDD cycle is:</p>
                    
                    <ol>
                        <li><strong>Red</strong>: Write a failing test</li>
                        <li><strong>Green</strong>: Make the test pass with the minimum amount of code</li>
                        <li><strong>Refactor</strong>: Improve the code while keeping the tests passing</li>
                    </ol>
                    
                    <p>Benefits of TDD include:</p>
                    <ul>
                        <li>Ensures testable code from the start</li>
                        <li>Forces you to think about edge cases early</li>
                        <li>Provides documentation of how your code should work</li>
                        <li>Creates a safety net for refactoring</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>Setting Up Jest for Testing</h2>
            
            <div class="video-grid">
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/f8seisa4rh" title="Setting Up Jest" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Configuring Jest</h3>
                    <p>To set up Jest in a Node.js project, follow these steps:</p>
                    
                    <h4>1. Install Jest</h4>
                    <pre>
npm install -D jest</pre>
                    
                    <h4>2. Add Test Script to package.json</h4>
                    <pre>
// In package.json
{
  "scripts": {
    "test": "jest --watch"
  }
}</pre>
                    
                    <h4>3. Create Test Files</h4>
                    <p>Jest will find your tests in two ways:</p>
                    <ul>
                        <li>By placing <code>.js</code> files inside a folder called <code>__tests__</code></li>
                        <li>By ending the name of a file in <code>.test.js</code> or <code>.spec.js</code></li>
                    </ul>
                    
                    <h4>4. Run Tests</h4>
                    <pre>
npm test</pre>
                </div>
                
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/f8seisa4rh" title="Writing Basic Tests with Jest" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Writing Basic Tests with Jest</h3>
                    <p>Here's an example of a basic test file structure:</p>
                    
                    <h4>Code Example - Simple Math Functions and Tests:</h4>
                    <pre>
// math.js
function sum(a, b) {
  return a + b;
}

function multiply(a, b) {
  return a * b;
}

module.exports = { sum, multiply };

// math.test.js
const { sum, multiply } = require('./math');

describe('Math module', () => {
  // Test suite for the sum function
  describe('sum function', () => {
    test('adds 1 + 2 to equal 3', () => {
      expect(sum(1, 2)).toBe(3);
    });
    
    test('adds negative numbers correctly', () => {
      expect(sum(-1, -2)).toBe(-3);
    });
  });
  
  // Test suite for the multiply function
  describe('multiply function', () => {
    test('multiplies 2 * 3 to equal 6', () => {
      expect(multiply(2, 3)).toBe(6);
    });
    
    test('multiplies with zero to equal zero', () => {
      expect(multiply(5, 0)).toBe(0);
    });
  });
});</pre>
                </div>
                
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/f8seisa4rh" title="Test Organization" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Jest Test Organization</h3>
                    <p>Jest provides several functions to organize your tests effectively:</p>
                    
                    <h4>Key Jest Functions:</h4>
                    <ul>
                        <li><code>describe()</code>: Group related tests in a test suite</li>
                        <li><code>test()</code> or <code>it()</code>: Define individual test cases</li>
                        <li><code>beforeEach()</code>: Run code before each test in a suite</li>
                        <li><code>afterEach()</code>: Run code after each test in a suite</li>
                        <li><code>beforeAll()</code>: Run code once before all tests in a suite</li>
                        <li><code>afterAll()</code>: Run code once after all tests in a suite</li>
                    </ul>
                    
                    <h4>Code Example - Test Organization:</h4>
                    <pre>
describe('User Authentication', () => {
  let db;
  
  // Setup - runs once before all tests
  beforeAll(() => {
    db = connectToTestDatabase();
  });
  
  // Cleanup - runs once after all tests
  afterAll(() => {
    disconnectFromDatabase(db);
  });
  
  // Reset for each test
  beforeEach(() => {
    resetTestUser(db);
  });
  
  // Test cases
  test('registers a new user successfully', () => {
    // Test registration
  });
  
  test('fails to register with invalid email', () => {
    // Test invalid registration
  });
  
  test('logs in an existing user', () => {
    // Test login
  });
});</pre>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>Advanced Testing Techniques</h2>
            
            <div class="video-grid">
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/f8seisa4rh" title="Assertions and Matchers" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Assertions and Matchers</h3>
                    <p>Jest provides a rich set of matchers to test different types of values:</p>
                    
                    <h4>Common Matchers:</h4>
                    <pre>
// Equality
expect(value).toBe(exactValue);            // Exact equality (===)
expect(value).toEqual(obj);                // Deep equality for objects

// Truthiness
expect(value).toBeTruthy();                // Truthy value
expect(value).toBeFalsy();                 // Falsy value
expect(value).toBeNull();                  // Null value
expect(value).toBeUndefined();             // Undefined value
expect(value).toBeDefined();               // Not undefined

// Numbers
expect(value).toBeGreaterThan(number);     // > number
expect(value).toBeGreaterThanOrEqual(number); // >= number
expect(value).toBeLessThan(number);        // < number
expect(value).toBeLessThanOrEqual(number); // <= number

// Strings
expect(string).toMatch(/regex/);           // Match regex

// Arrays and Iterables
expect(array).toContain(item);             // Contains item
expect(array).toHaveLength(number);        // Has length

// Objects
expect(object).toHaveProperty(keyPath);    // Has property
</pre>
                </div>
                
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/f8seisa4rh" title="Mocks and Spies" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Mocks and Spies</h3>
                    <p>Mocks allow you to replace real implementations with test doubles. This is particularly useful for:</p>
                    <ul>
                        <li>Testing code that makes API calls</li>
                        <li>Isolating the code being tested from its dependencies</li>
                        <li>Verifying that functions were called with specific arguments</li>
                    </ul>
                    
                    <h4>Code Example - Using Jest Mocks:</h4>
                    <pre>
// userService.js
const axios = require('axios');

async function getUsers() {
  const response = await axios.get('https://api.example.com/users');
  return response.data;
}

module.exports = { getUsers };

// userService.test.js
const axios = require('axios');
const { getUsers } = require('./userService');

// Mock the axios module
jest.mock('axios');

test('fetches users successfully', async () => {
  // Setup mock response
  const users = [{ id: 1, name: 'John' }, { id: A, name: 'Jane' }];
  axios.get.mockResolvedValue({ data: users });
  
  // Call the function
  const result = await getUsers();
  
  // Verify axios.get was called correctly
  expect(axios.get).toHaveBeenCalledWith('https://api.example.com/users');
  
  // Verify result
  expect(result).toEqual(users);
});</pre>
                </div>
                
                <div class="video-card">
                    <div class="video-container">
                        <iframe src="https://fast.wistia.net/embed/iframe/f8seisa4rh" title="Async Testing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <h3>Testing Asynchronous Code</h3>
                    <p>Jest provides several ways to test asynchronous code:</p>
                    
                    <h4>Code Example - Testing Async Functions:</h4>
                    <pre>
// Using async/await (recommended)
test('async function test with async/await', async () => {
  const data = await fetchData();
  expect(data).toBe('expected data');
});

// Using promises
test('async function test with promises', () => {
  return fetchData().then(data => {
    expect(data).toBe('expected data');
  });
});

// Using the done callback (older style)
test('async function test with done callback', done => {
  fetchData().then(data => {
    expect(data).toBe('expected data');
    done();
  });
});</pre>
                    
                    <h4>Testing Error Handling:</h4>
                    <pre>
test('handles errors in async functions', async () => {
  // Using .rejects with async/await
  await expect(fetchDataWithError()).rejects.toThrow('Network Error');
  
  // Alternative approach
  try {
    await fetchDataWithError();
    // If we reach this line, the test should fail
    expect(true).toBe(false); // This will never pass
  } catch (error) {
    expect(error.message).toBe('Network Error');
  }
});</pre>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Guided Project</h2>
            <div class="module-card">
                <h3>Testing Implementation</h3>
                <p>Build a test suite for a Node.js application using Jest</p>
                <a href="https://github.com/bloominstituteoftechnology/node-testing-guided" class="button" target="_blank" rel="noopener noreferrer">View Project</a>
            </div>
        </div>

        <div class="section">
            <h2>Resources</h2>
            <div class="module-grid">
                <div class="module-card">
                    <h3>Recommended Reading</h3>
                    <ul class="resource-link-list">
                        <li><a href="https://jestjs.io/docs/getting-started" target="_blank" rel="noopener noreferrer">Jest Documentation</a></li>
                        <li><a href="https://martinfowler.com/bliki/TestPyramid.html" target="_blank" rel="noopener noreferrer">Test Pyramid</a></li>
                        <li><a href="https://github.com/facebook/jest#readme" target="_blank" rel="noopener noreferrer">Jest GitHub Repository</a></li>
                    </ul>
                </div>
                <div class="module-card">
                    <h3>Tools & Libraries</h3>
                    <ul>
                        <li>Jest - JavaScript Testing Framework</li>
                        <li>jest-cli - Command line interface</li>
                        <li>jest-watch - Watch mode for Jest</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>