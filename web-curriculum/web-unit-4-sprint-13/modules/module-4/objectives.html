<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 4 - Deployment and Best Practices</title>
</head>
<body>
    <div class="course-container">
        <header>
            <h1>Module 4 - Deployment and Best Practices</h1>
            <p>Core Competencies</p>
        </header>

        <nav class="module-nav">
            <a href="index.html">Module Overview</a>
            <a href="guided-project.html">Guided Project</a>
            <a href="objectives.html" class="active">Core Competencies</a>
            <a href="assignment.html">Module Project</a>
        </nav>

        <main>
            <section class="objective">
                <h2>Objective 1 - Extract Configuration Into Environment Variables</h2>
                <div class="video-container">
                    <iframe src="https://fast.wistia.net/embed/iframe/yem91fxf1l" title="Node Environment Variables"></iframe>
                </div>
                <div class="content">
                    <h3>Overview</h3>
                    <p>When you develop and run code on your machine, you run code in its <code>development</code> environment.</p>
                    <p>Most companies will have a <code>testing</code> environment similar to production; it has the same versions of software and runs on similar, albeit weaker, hardware. They do this to mitigate the risks when moving to <code>production</code> servers that clients use.</p>
                    <p>Ideally, all environments run on the same stack, platforms, and versions. Still, it is common to have developers on the Windows platform with the latest version of Node.js and the <code>production</code> server running on Linux with the last stable version of Node.js.</p>

                    <h3>Environment Variables</h3>
                    <p>Environment variables are a way to store configuration values that might change between environments. Common examples include:</p>
                    <ul>
                        <li>Port numbers</li>
                        <li>Database connection strings</li>
                        <li>API keys</li>
                        <li>Feature flags</li>
                    </ul>

                    <h3>Using dotenv</h3>
                    <p>The <code>dotenv</code> package is commonly used to load environment variables from a <code>.env</code> file:</p>
                    <pre><code>require('dotenv').config(); // add this line as the first thing to run

const port = process.env.PORT || 9000;

server.listen(port, () => {
  console.log(`\n*** Server Running on http://localhost:${port} ***\n`);
});</code></pre>

                    <h3>Best Practices</h3>
                    <ul>
                        <li>Add <code>.env</code> to <code>.gitignore</code> to prevent secrets from being committed</li>
                        <li>Provide a <code>.env.example</code> file with dummy values for documentation</li>
                        <li>Use sensible defaults for development</li>
                        <li>Validate required environment variables at startup</li>
                    </ul>

                    <h3>Challenge</h3>
                    <p>Extract all secrets and values that need to change between <code>development</code> and <code>production</code> environments.</p>
                </div>
            </section>

            <section class="objective">
                <h2>Objective 2 - Deploy a Web API to Heroku</h2>
                <div class="video-container">
                    <iframe src="https://fast.wistia.net/embed/iframe/n63bbv8ubc" title="Heroku Deployment"></iframe>
                </div>
                <div class="content">
                    <h3>Overview</h3>
                    <p>Heroku is a popular platform for deploying web applications. While it no longer provides a free tier, understanding how to deploy to Heroku helps you understand deployment concepts that apply to other platforms.</p>

                    <h3>Key Requirements</h3>
                    <ul>
                        <li>A "start" script in package.json that uses Node (not Nodemon)</li>
                        <li>Dynamic port configuration using environment variables</li>
                        <li>All dependencies listed in package.json</li>
                        <li>No hardcoded configuration values</li>
                    </ul>

                    <h3>Deployment Steps</h3>
                    <ol>
                        <li>Create a Heroku account and install the Heroku CLI</li>
                        <li>Create a new Heroku app</li>
                        <li>Connect your GitHub repository</li>
                        <li>Enable automatic deployments</li>
                        <li>Configure environment variables</li>
                        <li>Deploy your application</li>
                    </ol>

                    <h3>Environment Variables on Heroku</h3>
                    <p>Environment variables can be set in the Heroku dashboard:</p>
                    <ol>
                        <li>Go to the "Settings" tab</li>
                        <li>Click "Reveal Config Vars"</li>
                        <li>Add your environment variables</li>
                    </ol>

                    <h3>Challenge</h3>
                    <p>Using the information you've obtained from the guided project, create an application on Heroku to set up continuous deployment from one of your GitHub repositories.</p>
                </div>
            </section>
        </main>
    </div>
</body>
</html> 