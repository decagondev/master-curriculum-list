<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 2 - Server-Side Routing with Express</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #1a1d23; /* Dark background color */
            color: #ffffff;
        }
        .course-container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #222831; /* Darker container background */
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        h1, h2, h3, h4 {
            color: #ffffff;
            margin: 0;
        }
        h1 {
            color: #ffffff;
            margin-bottom: 30px;
            border-bottom: 2px solid #ff5722; /* Orange accent color */
            padding-bottom: 10px;
        }
        h2 {
            color: #ffffff;
            margin-top: 30px;
            margin-bottom: 20px;
        }
        h3 {
            color: #ff5722; /* Orange accent color */
            margin-top: 0;
        }
        .module-nav {
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .module-nav a {
            display: inline-block;
            padding: 8px 16px;
            background-color: #333a47;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .module-nav a:hover {
            background-color: #ff5722;
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.5);
        }
        .module-nav a.active {
            background-color: #ff5722;
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.5);
        }
        main {
            background-color: #2a303c;
            border-radius: 4px;
            padding: 20px;
            border: 1px solid #333a47;
        }
        .objective {
            margin-bottom: 40px;
            border-bottom: 1px solid #444c5c;
            padding-bottom: 30px;
        }
        .objective:last-child {
            border-bottom: none;
        }
        p, li {
            color: #b3b3b3;
        }
        ul, ol {
            padding-left: 20px;
        }
        li {
            margin-bottom: 10px;
        }
        .content {
            background-color: #333a47;
            border-radius: 6px;
            padding: 20px;
            border: 1px solid #444c5c;
            margin: 20px 0;
        }
        .video-container {
            margin: 20px 0;
            position: relative;
            overflow: hidden;
            padding-top: 56.25%; /* 16:9 aspect ratio */
            border-radius: 8px;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
        }
        pre {
            background-color: #161b22;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 20px 0;
        }
        code {
            font-family: 'Courier New', Courier, monospace;
            color: #e6e6e6;
            background-color: #161b22;
            padding: 2px 4px;
            border-radius: 3px;
        }
        pre code {
            padding: 0;
            background-color: transparent;
        }
        a {
            color: #ff5722; /* Orange accent color */
            text-decoration: none;
            transition: color 0.2s;
        }
        a:hover {
            text-decoration: underline;
            color: #ff7043; /* Lighter orange on hover */
        }
        .info-box {
            background-color: #333a47;
            border-radius: 6px;
            padding: 20px;
            border: 1px solid #444c5c;
            margin: 20px 0;
        }
        .info-box h3 {
            margin-top: 0;
            color: #ff5722;
        }
    </style>
</head>
<body>
    <div class="course-container">
        <header>
            <h1>Module 2 - Server-Side Routing with Express</h1>
            <p>Core Competencies</p>
        </header>

        <nav class="module-nav">
            <a href="index.html">Module Overview</a>
            <a href="guided-project.html">Guided Project</a>
            <a href="objectives.html" class="active">Core Competencies</a>
            <a href="assignment.html">Module Project</a>
        </nav>

        <main>
            <section class="objective">
                <h2>Objective 1 - Explain How Routing Works In an Express Application</h2>
                <div class="video-container">
                    <iframe src="https://fast.wistia.net/embed/iframe/ievzjyq62a" title="Express Routing" allow="autoplay; fullscreen" loading="lazy"></iframe>
                </div>
                <div class="content">
                    <h3>Overview</h3>
                    <p>Routing refers to determining how an application responds to a client request to a particular endpoint, which is a URI (or path) and a specific HTTP request method (GET, POST, etc.). Each route can have one or more handler functions, which are executed when the route is matched.</p>
                    
                    <div class="info-box">
                        <h3>Express Routing Key Concepts</h3>
                        <ul>
                            <li><strong>Routes</strong> - Define endpoints at which requests can be made</li>
                            <li><strong>HTTP Methods</strong> - GET, POST, PUT, DELETE operations that define the action</li>
                            <li><strong>Handler Functions</strong> - Functions executed when a route is matched</li>
                            <li><strong>Request Object</strong> - Contains information about the HTTP request</li>
                            <li><strong>Response Object</strong> - Used to send back the HTTP response</li>
                        </ul>
                    </div>
                    
                    <p>Let's look at a basic example of routing in action. First, to make our Express application respond to <code>GET</code> requests on different URLs, add the following endpoints:</p>
                    <pre><code>// this request handler executes when making a GET request to /about
server.get('/about', (req, res) => {
  res.status(200).send('<h1>About Us</h1>');
});

// this request handler executes when making a GET request to /contact
server.get('/contact', (req, res) => {
  res.status(200).send('<h1>Contact Form</h1>');
});</code></pre>

                    <p>Two things to note:</p>
                    <ul>
                        <li>We use the same HTTP Method on both endpoints, but Express looks at the URL and executes the corresponding request handler.</li>
                        <li>We can return a string with valid HTML!</li>
                    </ul>
                    <p>Open a browser and navigate to the <code>/about</code> and <code>/contact</code> routes. The appropriate route handler will execute.</p>
                </div>
                
                <div class="content">
                    <h3>HTTP Methods and Status Codes</h3>
                    <p>Express routes can respond to any HTTP method. The most commonly used methods are:</p>
                    
                    <ul>
                        <li><strong>GET</strong> - Request data from a specified resource</li>
                        <li><strong>POST</strong> - Submit data to be processed to a specified resource</li>
                        <li><strong>PUT</strong> - Update a specified resource</li>
                        <li><strong>DELETE</strong> - Delete a specified resource</li>
                    </ul>
                    
                    <p>When responding to requests, use the appropriate HTTP status codes:</p>
                    <ul>
                        <li><strong>200 (OK)</strong> - Standard response for successful HTTP requests, typically used for GET and PUT</li>
                        <li><strong>201 (Created)</strong> - The request has been fulfilled and resulted in a new resource being created, typically used for POST</li>
                        <li><strong>204 (No Content)</strong> - The server successfully processed the request, but is not returning any content, typically used for DELETE</li>
                        <li><strong>400 (Bad Request)</strong> - The server cannot process the request due to a client error</li>
                        <li><strong>404 (Not Found)</strong> - The requested resource could not be found</li>
                        <li><strong>500 (Internal Server Error)</strong> - A generic error message when the server encounters an unexpected condition</li>
                    </ul>
                </div>
                
                <div class="content">
                    <h3>Follow Along</h3>
                    <p>Please follow along as we write endpoints that execute different request handlers on the same URL by changing the HTTP method.</p>
                    <pre><code>// this request handler executes when making a POST request to /hobbits
server.post('/hobbits', (req, res) => {
  res.status(201).json({ url: '/hobbits', operation: 'POST' });
});

// this request handler executes when making a PUT request to /hobbits
server.put('/hobbits', (req, res) => {
  res.status(200).json({ url: '/hobbits', operation: 'PUT' });
});

// this request handler executes when making a DELETE request to /hobbits
server.delete('/hobbits', (req, res) => {
  res.status(204);
});</code></pre>

                    <p>Note the different HTTP status codes we're using:</p>
                    <ul>
                        <li>201 (Created) for successful POST operations</li>
                        <li>200 (OK) for successful PUT operations</li>
                        <li>204 (No Content) for successful DELETE operations</li>
                    </ul>
                    <p>You may have noticed that we are not reading any data from the request, as that is something we'll learn in the next objective. To test these endpoints, you'll need to use a tool like Postman, Insomnia, or curl that can send different types of HTTP requests.</p>
                </div>

                <div class="content">
                    <h3>Challenge</h3>
                    <p>Your assignment is to add endpoints to handle <code>POST</code>, <code>PUT</code>, and <code>DELETE</code> for the <code>/users</code> route. Returning a JSON response similar to what we did in the code-along is sufficient.</p>
                    <p>Try implementing the following functionality:</p>
                    <ul>
                        <li>POST to /users - Return a 201 status code and a JSON object with information about the operation</li>
                        <li>PUT to /users - Return a 200 status code and relevant information about the update</li>
                        <li>DELETE to /users - Return a 204 status code to indicate successful deletion with no content</li>
                    </ul>
                    <p>Test your endpoints using Postman or another API testing tool.</p>
                </div>
            </section>

            <section class="objective">
                <h2>Objective 2 - Read Data From the Query String, Request Body, and Route Parameters</h2>
                <div class="video-container">
                    <iframe src="https://fast.wistia.net/embed/iframe/example" title="Express Data Reading" allow="autoplay; fullscreen" loading="lazy"></iframe>
                </div>
                <div class="content">
                    <h3>Overview</h3>
                    <p>Express provides several ways to read data sent by the client. In this objective, we'll explore how to access data from three different sources:</p>
                    
                    <div class="info-box">
                        <h3>Data Sources in Express</h3>
                        <ul>
                            <li><strong>Query Strings</strong> - Data appended to the URL after a question mark (?)</li>
                            <li><strong>Request Body</strong> - Data sent in the body of the request, usually with POST or PUT</li>
                            <li><strong>Route Parameters</strong> - Parts of the URL path that are variable</li>
                        </ul>
                    </div>
                    
                    <h3>Follow Along</h3>
                    <p>We'll explore how to read data from each source:</p>
                    
                    <h4>1. Query Strings</h4>
                    <p>Query strings are accessed through the <code>req.query</code> object:</p>
                    <pre><code>// GET /api/users?limit=5&sortBy=name
server.get('/api/users', (req, res) => {
  const limit = req.query.limit; // "5"
  const sortBy = req.query.sortBy; // "name"
  
  res.json({ 
    limit, 
    sortBy,
    message: `Getting ${limit} users sorted by ${sortBy}` 
  });
});</code></pre>
                    
                    <h4>2. Request Body</h4>
                    <p>To access the request body, we need to add body-parsing middleware:</p>
                    <pre><code>// First, add the middleware
server.use(express.json());

// Then access body data in routes
server.post('/api/users', (req, res) => {
  const { name, email } = req.body;
  
  // Now you can use the data
  res.status(201).json({ 
    message: `Created user ${name} with email ${email}` 
  });
});</code></pre>
                    
                    <h4>3. Route Parameters</h4>
                    <p>Route parameters are defined in the URL path with a colon and accessed via <code>req.params</code>:</p>
                    <pre><code>// GET /api/users/42
server.get('/api/users/:id', (req, res) => {
  const userId = req.params.id; // "42"
  
  res.json({ 
    message: `Getting user with ID: ${userId}` 
  });
});</code></pre>
                </div>
            </section>

            <section class="objective">
                <h2>Objective 3 - Explain the Basics of the REST Architectural Style</h2>
                <div class="video-container">
                    <iframe src="https://fast.wistia.net/embed/iframe/example" title="REST Basics" allow="autoplay; fullscreen" loading="lazy"></iframe>
                </div>
                <div class="content">
                    <h3>Overview</h3>
                    <p>REST (Representational State Transfer) is an architectural style for designing networked applications. It relies on a stateless, client-server communication protocol, almost always HTTP.</p>
                    
                    <div class="info-box">
                        <h3>REST Principles</h3>
                        <ul>
                            <li><strong>Client-Server Architecture</strong> - Separation of concerns between client and server</li>
                            <li><strong>Statelessness</strong> - Each request contains all information needed to complete it</li>
                            <li><strong>Cacheability</strong> - Responses must define themselves as cacheable or non-cacheable</li>
                            <li><strong>Uniform Interface</strong> - A consistent way to interact with resources</li>
                            <li><strong>Layered System</strong> - Client cannot tell if it's connected directly to the end server</li>
                            <li><strong>Resource-Based</strong> - Resources are identified in requests and are separate from their representations</li>
                        </ul>
                    </div>
                    
                    <h3>RESTful API Design</h3>
                    <p>In a RESTful API, endpoints (URLs) represent resources, and HTTP methods represent operations on those resources:</p>
                    
                    <ul>
                        <li><strong>GET /users</strong> - List all users</li>
                        <li><strong>POST /users</strong> - Create a new user</li>
                        <li><strong>GET /users/123</strong> - Get user with ID 123</li>
                        <li><strong>PUT /users/123</strong> - Update user with ID 123</li>
                        <li><strong>DELETE /users/123</strong> - Delete user with ID 123</li>
                    </ul>
                    
                    <p>This approach creates a uniform interface that is intuitive and predictable for API consumers.</p>
                </div>
            </section>

            <section class="objective">
                <h2>Objective 4 - Use Express Routers to Organize Web API Code</h2>
                <div class="video-container">
                    <iframe src="https://fast.wistia.net/embed/iframe/example" title="Express Routers" allow="autoplay; fullscreen" loading="lazy"></iframe>
                </div>
                <div class="content">
                    <h3>Overview</h3>
                    <p>As your Express application grows, organizing all routes in a single file can become unwieldy. Express Router allows you to modularize your routes and create mini-applications that can be mounted to your main application.</p>
                    
                    <div class="info-box">
                        <h3>Benefits of Express Router</h3>
                        <ul>
                            <li>Modular, maintainable route handling</li>
                            <li>Separation of concerns by resource type</li>
                            <li>Ability to apply middleware to specific route groups</li>
                            <li>Better code organization and reusability</li>
                        </ul>
                    </div>
                    
                    <h3>Follow Along</h3>
                    <p>Let's create a simple router for user-related endpoints:</p>
                    
                    <h4>1. Create a Separate Router File</h4>
                    <pre><code>// users-router.js
const express = require('express');
const router = express.Router();

// Routes are relative to the base path
router.get('/', (req, res) => {
  res.json({ message: 'Getting all users' });
});

router.get('/:id', (req, res) => {
  res.json({ message: `Getting user with ID: ${req.params.id}` });
});

router.post('/', (req, res) => {
  res.status(201).json({ message: 'Creating a new user' });
});

module.exports = router;</code></pre>
                    
                    <h4>2. Mount the Router in the Main Application</h4>
                    <pre><code>// server.js
const express = require('express');
const server = express();
const usersRouter = require('./users-router');

server.use(express.json());

// Mount the router at /api/users
server.use('/api/users', usersRouter);

server.listen(5000, () => {
  console.log('Server running on port 5000');
});</code></pre>
                    
                    <p>Now all routes defined in the users-router.js file will be accessible under the /api/users path.</p>
                </div>
            </section>
        </main>
    </div>
</body>
</html> 